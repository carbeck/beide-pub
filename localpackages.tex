\usepackage{langsci-optional}
\usepackage{langsci-gb4e}
\usepackage{langsci-lgr}

\usepackage{listings}
\lstset{basicstyle=\ttfamily,tabsize=2,breaklines=true}

% afterpage
\usepackage{afterpage}

% biblatex
% Possessive's (2023) citation, except for German
\DeclareNameWrapperFormat{labelname:poss}{#1s}
\DeclareFieldFormat{shorthand:poss}{%
  \ifnameundef{labelname}{#1s}{#1}}
\DeclareFieldFormat{citetitle:poss}{\mkbibemph{#1}s}
\DeclareFieldFormat{label:poss}{#1s}
\newrobustcmd*{\posscitealias}{%
  \AtNextCite{%
    \DeclareNameWrapperAlias{labelname}{labelname:poss}%
    \DeclareFieldAlias{shorthand}{shorthand:poss}%
    \DeclareFieldAlias{citetitle}{citetitle:poss}%
    \DeclareFieldAlias{label}{label:poss}}}
\newrobustcmd*{\posscite}{%
  \posscitealias%
  \textcite}
\newrobustcmd*{\Posscite}{\bibsentence\posscite}
\newrobustcmd*{\posscites}{%
  \posscitealias%
  \textcites}

% biblatex
% Define new bibliography stings
\NewBibliographyString{
  subvoce, subvoces,
}
\DefineBibliographyStrings{german}{%
  subvoce = {\relax{}s\adddot\,v\adddot},
  subvoces = {\relax{}s\adddot\,vv\adddot},
}

% cleveref
% In-text references
% cf. https://tex.stackexchange.com/a/139051
% Since German plural formation is not as regular as in English (-e, -en for
% example), we will define the label as empty
\usepackage[\lsBookLanguage,sort&compress,noabbrev]{cleveref}
\newcommand{\crefrangeconjunction}{--}
\crefname{xnumi}{}{}
\creflabelformat{xnumi}{(#2#1#3)}
\crefname{xnumii}{}{}
\creflabelformat{xnumii}{(#2#1#3)}
\crefname{xnumiii}{}{}
\creflabelformat{xnumiii}{(#2#1#3)}
\crefname{xnumiv}{}{}
\creflabelformat{xnumiv}{(#2#1#3)}
\crefrangeformat{xnumi}{(#3#1#4)--(#5#2#6)}
\crefrangeformat{xnumii}{(#3#1#4--#5\crefstripprefix{#1}{#2}#6)}
\crefrangemultiformat{xnumii}{(#3\arabic{xnumi}#1#4--#5#2#6)}
{ und~(#3\arabic{xnumi}#1#4--#5#2#6)}{, (#3\arabic{xnumi}#1#4--#5#2#6)}
{ und~(#3\arabic{xnumi}#1#4--#5#2#6)}

% csquotes
% Quotations
\usepackage{csquotes}
\SetCiteCommand{\autocite}
\SetBlockEnvironment{quote}
\let\q\textquote

% multirow
\usepackage{multirow}
